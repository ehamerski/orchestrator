sonarqube {
    properties {
        property "sonar.host.url", "http://localhost:9000"
        property "sonar.token", "sqp_16e1ecf16c9890c88aaeb1883c313f21bcda2557"
        property "sonar.projectName", "Camel Master Route Example"
        property "sonar.projectKey", "camel-master-route-example"

        property "sonar.java.coveragePlugin", "jacoco"
        property "sonar.tests", "src/test"
        property "sonar.java.test.binaries", "$buildDir/classes/java/test"
        property "sonar.coverage.jacoco.xmlReportPaths", "$buildDir/reports/jacoco/tests/*.xml"
    }
}

jacocoTestReport {
    dependsOn test
    reports {
        xml.required = true
    }
}

jacocoTestCoverageVerification {
    dependsOn jacocoTestReport
}

test.finalizedBy jacocoTestReport
check.finalizedBy jacocoTestCoverageVerification